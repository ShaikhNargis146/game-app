<!-- left menu -->
<left-menu></left-menu>

<!-- right menu -->

<!-- <right-menu></right-menu> -->

<div class="kingtable">
  <div class="top_field">
    <div class="option_menu_icon left" ng-click="openLeftMenu()">
      <!-- <img src="img/option.png" class=""> -->
      <i class="icon ion-navicon-round"></i>
    </div>
    <!-- <game-history></game-history> -->
    <div class="right_side_icon right">
      <div class="setting_menu_icon">
        <span class="icon ion-information" ng-click="toggleTableInfo()"></span>
        <!-- <img src="img/option.png" ng-click="openRightMenu()"> -->
      </div>
      <table-info></table-info>
    </div>

  </div>

  <div class="main-table" ng-click="closeAllModal()">
    <div class="new_game_timer" ng-if="showNewGameTime && remainingPlayerCount>1">
      <span> New Game will start in 15s </span>
    </div>
    <div class="table_message opt-tan" ng-if="tableMessageShow">
      <span>{{tableMessage}} </span>
    </div>
    <div class="table_message opt-tan" ng-if="players.length > 0 && winnerMessageShow">
      <span ng-repeat="winners in players track by $index" ng-if="winners.winRank==1">{{winners.name}} </span> won the game.
    </div>
    <div class="playing-table">
      <img src="img/doll.png" class="doll" ng-click="timerStart()">
      <img src="img/table.png" class="bg-table" ng-click="timerStop()">
      <div class="tip" ng-click="openMakeTipModal()" ng-if="!sitHere">
        TIP
      </div>
      <!-- Cards -->
      <!-- <div class="new_game_timer" ng-if="showNewGameTime && !(remainingPlayerCount>1) && !tableMessageShow">
        <span> New Game will start in 15s </span>
      </div> -->
      <pot-amount ng-amount="potAmount" ng-player="players"> </pot-amount>
      <tip-amount ng-amount="tipAmount" ng-player-no="TipPlayerNo" ng-player="players"> </tip-amount>

      <div class="card_shuffle">
        <div class="cards">
          <card card='NONE'> </card>
          <card card='NONE'> </card>
          <card card='NONE'> </card>
        </div>
        <div class="cards toplyr1">
          <card card='NONE'> </card>
          <card card='NONE'> </card>
          <card card='NONE'> </card>
        </div>
      </div>
      <div class="flip-container" ng-if="tableData.jokerCardValue && !startAnimation" ng-class="{'joker-card-animation':!startAnimation} ">
        <div class="flipper">
          <div class="card-joker">
            <div class="cards">
              <!-- <card card='NONE' class="front"></card> -->
              <card card='{{tableData.jokerCardValue}}' class="back"></card>
            </div>
          </div>
        </div>
      </div>

      <!-- player -->
      <div class="players">
        <players id="plr1" ng-click="sitHerefn(1)" ng-game-type="gameType" ng-remaining-player="remainingPlayerCount" ng-pos="1"
          ng-player="players[0]" ng-sit-here="sitHere" timer-out="timerOut()" ng-win="winnerPlayerNo" ng-animation="startAnimation"
          ng-winner-player="showWinnerPlayer">
        </players>
        <div class="p1 bootAnimate" ng-if="(players[0].isChaal==true && !players[0].isFold && remainingPlayerCount>1) || (players[0] && startCoinAnime && remainingPlayerCount>1)">
          <img src="img/coin.png" class="coin">{{ chaalAmt}}
        </div>
        <players id="plr2" ng-click="sitHerefn(2)" ng-pos="2" ng-game-type="gameType" ng-remaining-player="remainingPlayerCount"
          ng-player="players[1]" ng-sit-here="sitHere" timer-out="timerOut()" ng-win="winnerPlayerNo" ng-animation="startAnimation"
          ng-winner-player="showWinnerPlayer">
        </players>
        <div class="p2 bootAnimate" ng-if="(players[1].isChaal==true && !players[1].isFold && remainingPlayerCount>1) || (players[1] && startCoinAnime && remainingPlayerCount>1)">
          <img src="img/coin.png" class="coin">{{chaalAmt}}
        </div>
        <players id="plr3" ng-click="sitHerefn(3)" ng-pos="3" ng-game-type="gameType" ng-remaining-player="remainingPlayerCount"
          ng-player="players[2]" ng-sit-here="sitHere" timer-out="timerOut()" ng-win="winnerPlayerNo" ng-animation="startAnimation"
          ng-winner-player="showWinnerPlayer">
        </players>
        <div class="p3 bootAnimate" ng-if="(players[2].isChaal==true && !players[2].isFold && remainingPlayerCount>1) ||  (players[2] && startCoinAnime && remainingPlayerCount>1) ">
          <img src="img/coin.png" class="coin">{{chaalAmt}}
        </div>
        <!-- <div>
          <div class="pietimer1"></div>
        </div> -->
        <players id="plr4" ng-click="sitHerefn(4)" ng-pos="4" ng-game-type="gameType" ng-remaining-player="remainingPlayerCount"
          ng-player="players[3]" ng-sit-here="sitHere" timer-out="timerOut()" ng-win="winnerPlayerNo" ng-animation="startAnimation"
          ng-winner-player="showWinnerPlayer">
        </players>
        <div class="p4 bootAnimate" ng-if="(players[3].isChaal==true && !players[3].isFold && remainingPlayerCount>1) ||  (players[3] && startCoinAnime && remainingPlayerCount>1)">
          <img src="img/coin.png" class="coin">{{chaalAmt}}
        </div>
        <players id="plr5" ng-click="sitHerefn(5)" ng-pos="5" ng-game-type="gameType" ng-remaining-player="remainingPlayerCount"
          ng-player="players[4]" ng-sit-here="sitHere" timer-out="timerOut()" ng-win="winnerPlayerNo" ng-animation="startAnimation"
          ng-winner-player="showWinnerPlayer">
        </players>
        <div class="p5 bootAnimate" ng-if="(players[4].isChaal==true && !players[4].isFold && remainingPlayerCount>1) ||  (players[4] && startCoinAnime && remainingPlayerCount>1)">
          <img src="img/coin.png" class="coin">{{chaalAmt}}
        </div>
        <players id="plr6" ng-click="sitHerefn(6)" ng-pos="6" ng-game-type="gameType" ng-remaining-player="remainingPlayerCount"
          ng-player="players[5]" ng-sit-here="sitHere" timer-out="timerOut()" ng-win="winnerPlayerNo" ng-animation="startAnimation"
          ng-winner-player="showWinnerPlayer">
        </players>
        <div class="p6 bootAnimate" ng-if="(players[5].isChaal==true && !players[5].isFold && remainingPlayerCount>1)  || (players[5] && startCoinAnime && remainingPlayerCount>1)">
          <img src="img/coin.png" class="coin">{{chaalAmt}}
        </div>
        <players id="plr7" ng-click="sitHerefn(7)" ng-pos="7" ng-game-type="gameType" ng-remaining-player="remainingPlayerCount"
          ng-player="players[6]" ng-sit-here="sitHere" timer-out="timerOut()" ng-win="winnerPlayerNo" ng-animation="startAnimation"
          ng-winner-player="showWinnerPlayer">
        </players>
        <div class="p7 bootAnimate" ng-if="(players[6].isChaal==true && !players[6].isFold && remainingPlayerCount>1) || (players[6] && startCoinAnime && remainingPlayerCount>1)">
          <img src="img/coin.png" class="coin">{{chaalAmt}}
        </div>
        <players id="plr8" ng-click="sitHerefn(8)" ng-pos="8" ng-game-type="gameType" ng-remaining-player="remainingPlayerCount"
          ng-player="players[7]" ng-sit-here="sitHere" timer-out="timerOut()" ng-win="winnerPlayerNo" ng-animation="startAnimation"
          ng-winner-player="showWinnerPlayer">
        </players>
        <div class="p8 bootAnimate" ng-if="(players[7].isChaal==true && !players[7].isFold && remainingPlayerCount>1) ||  (players[7] && startCoinAnime && remainingPlayerCount>1)">
          <img src="img/coin.png" class="coin">{{chaalAmt}}
        </div>

        <!-- main Player -->
        <mainPlayer ng-click="sitHerefn(9)" ng-game-type="gameType" ng-remaining-player="remainingPlayerCount" ng-if="sitHere" ng-pos="9"
          ng-main="9" ng-player="players[8]" ng-sit-here="sitHere" ng-win="winnerPlayerNo">
        </mainPlayer>
        <mainPlayer ng-click="sitHerefn(9)" ng-game-type="gameType" ng-remaining-player="remainingPlayerCount" ng-if="!sitHere" ng-pos="0"
          ng-main="main-player" ng-player="players[8]" ng-sit-here="sitHere" ng-win="winnerPlayerNo"> </mainPlayer>
        <div class="p9 bootAnimate" ng-if="(players[8].isChaal==true && !players[8].isFold && remainingPlayerCount>1) ||  (players[8] && startCoinAnime && remainingPlayerCount>1)">
          <img src="img/coin.png" class="coin">{{chaalAmt}}
        </div>
        <!--end  main Player -->
      </div>
      <!-- end player -->

      <!-- <div class="p9 bootAnimate" ng-if="true">
        <img src="img/coin.png" class="coin">{{potAmt}}
      </div> -->

      <!--showCard-->
      <mainPlayerCard ng-sit-here="sitHere" ng-player="players[8]" show-card="showCard()" ng-animation="startAnimation" ng-win="winnerPlayerNo"
        ng-game-type="gameType" ng-remaining-player="remainingPlayerCount">
      </mainPlayerCard>
      <!-- <div ng-if="player.isBlind && !startAnimation && !player.isFold && (player.cards.length > 0) && (remainingPlayerCount > 1 && winnerPlayerNo == -1)"
        class="card_see" ng-click="showCard()">See</div> -->
    </div>
    <div class="playing-player-info" ng-if="!sitHere && players[8]">
      <button class="pack" ng-click="pack()" ng-disabled="sideShowDataFrom == 1" ng-if="players[8].isTurn && !players[8].isFold && !players[8].winRank"
        promise-btn="packPromise">
        PACK
      </button>
      <button class="slide_show" ng-click="sideShow()" ng-if="(players[8].isTurn)&& (remainingPlayerCount > 2) && !players[8].isFold && !players[8].winRank"
        ng-disabled="blindPlayerCount > 0 || players[8].balance < betamount || sideShowDataFrom == 1" promise-btn="sideShowPromise">
        side show
      </button>
      <button class="slide_show " ng-click="showWinner()" promise-btn="showWinnerPromise" ng-if="(players[8].isTurn) && (remainingPlayerCount == 2) && !players[8].isFold && !players[8].winRank"
        ng-disabled="players[8].balance < betamount || sideShowDataFrom == 1">show</button>
      <span class="info" ng-class="{'color_red':insufficientFunds}"> {{players[8].name}}
        <img src="img/coin.png"> {{players[8].balance | number:0}}
        <span ng-if="betamount && players[8].balance && insufficientFunds && getRemaining() < 4"> {{ getRemaining()}}X remaining</span>
      </span>
      <button class="minus no-click-effect" ng-disabled="sideShowDataFrom == 1" ng-click="removeCoin()" ng-if="players[8].isTurn && betamount>minAmt && !players[8].isFold && !players[8].winRank">
        -
      </button>
      <button class="minus no-click-effect opacity-05" ng-disabled="sideShowDataFrom == 1" ng-if="players[8].isTurn && betamount<=minAmt && !players[8].isFold && !players[8].winRank">
        -
      </button>
      <button class="coin" ng-click="playChaal()" ng-disabled="players[8].balance < betamount || sideShowDataFrom == 1" promise-btn="chaalPromise"
        ng-if="players[8].isTurn && !players[8].isFold && !players[8].winRank">
        <img src="img/coin.png"> {{betamount}}
        <span ng-if="players[8].isBlind">blind </span>
        <span ng-if="!players[8].isBlind">chaal</span>
      </button>
      <button class="plus no-click-effect" ng-click="addCoin()" ng-disabled="sideShowDataFrom == 1" ng-if="players[8].isTurn && betamount<maxAmt && !players[8].isFold && !players[8].winRank">+</button>
      <button class="plus no-click-effect opacity-05" ng-disabled="sideShowDataFrom == 1" ng-if="players[8].isTurn && betamount>=maxAmt && !players[8].isFold && !players[8].winRank">+</button>
    </div>
  </div>
</div>


<div class="loader table_loader" ng-if="ShowLoader">
  <div class="center">
    <img src="img/logo.png" class="loader-logo">
    <div>Loading... </div>
    <img src="img/spinner.gif">
  </div>


</div>
